---
import CustomImage from '@/components/shared/CustomImage.astro';
import type { ImageMetadata } from 'astro';
import { Icon } from 'astro-icon/components';
import type { HTMLAttributes } from 'astro/types';

type Props = Pick<HTMLAttributes<'div'>, 'class'>;

const { class: className, ...rest } = Astro.props;

const hitsImgs = import.meta.glob<{ default: ImageMetadata }>('/src/assets/img/home/hits/*.{jpeg,jpg,png,gif}');

interface CartItem {
  image: Promise<{ default: ImageMetadata }>;
  name: string;
  oldPrice: string;
  price: string;
  count: string;
  totalPrice: string;
}

const item: CartItem = {
  image: hitsImgs['/src/assets/img/home/hits/hits-slide-image.png'](),
  name: 'Костюм Горка Зима Финл. ПК олива',
  oldPrice: '13 000',
  price: '5 200',
  count: '9',
  totalPrice: '41 600',
};

const { image, name, oldPrice, price, count, totalPrice } = item;
---

<div class:list={['cart-item', className]} {...rest}>
  <div class='cart-item__image'>
    <CustomImage src={image} alt='image' />
  </div>
  <div class='cart-item__content'>
    <h3 class='cart-item__name'>{name}</h3>
    <div class='cart-item__price-info price-info'>
      <span class='price-info__old-price'>{oldPrice} РУБ</span>
      {price} РУБ X {count} = {totalPrice}
    </div>
    <div class='cart-item__dimensions'>
      {
        Array.from({ length: 3 }).map(() => (
          <div class='cart-item__dimension dimension-cart'>
            <div class='dimension-cart__row'>
              <div class='dimension-cart__select'>
                <div class='dimension-cart__select-trigger dimension-cart__field'>
                  <span>36</span>
                  <Icon name='arrow-down' />
                </div>
              </div>
              <button class='dimension-cart__action'>-</button>
              <div class='dimension-cart__field'>5</div>
              <button class='dimension-cart__action'>+</button>
            </div>
          </div>
        ))
      }
    </div>
    <button class='cart-item__add-dimension'>Добавить размер</button>
  </div>
  <button class='cart-item__delete'>Убрать из Корзины</button>
</div>

<style lang='scss'></style>
