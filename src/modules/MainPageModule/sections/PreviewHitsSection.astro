---
import type { Slide } from '@/components/ui/Slider.astro';
import type { PreviewHitProps } from '../components/PreviewHit.astro';
import PreviewHit from '../components/PreviewHit.astro';
import Slider from '@/components/ui/Slider.astro';
import ShowMoreCatalog from '@/components/ui/ShowMoreCatalog.astro';
import PreviewBlock from '../components/PreviewBlock.astro';
import PreviewTags from '../components/PreviewTags.astro';

interface Props {
  direction?: 'left' | 'right';
}

const { direction = 'left' } = Astro.props;

const hitsImages = import.meta.glob<{ default: ImageMetadata }>('/src/assets/img/home/hits/*.{jpeg,jpg,png,gif}');
const previewHitsimages = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/img/home/preview-hits/*.{jpeg,jpg,png,gif}'
);

const imageSrcList: string[] = [
  '/src/assets/img/home/hits/hits-slide-image.png',
  '/src/assets/img/home/hits/hits-slide-image.png',
  '/src/assets/img/home/hits/hits-slide-image.png',
  '/src/assets/img/home/hits/hits-slide-image.png',
  '/src/assets/img/home/hits/hits-slide-image.png',
];

const slides: Slide[] = [
  {
    image: hitsImages[imageSrcList[0]](),
    country: 'Финляндия',
    title: 'Костюм Горка Зима Финл. ПК #309',
    description: 'Морозоустойчивая, Непромокаемая, Дышащая, Морозоустойчивая, Непромокаемая, Дышащая,',
    price: '7 712',
  },
  {
    image: hitsImages[imageSrcList[1]](),
    country: 'Финляндия',
    title: 'Костюм Горка Зима Финл. ПК #309',
    description: 'Морозоустойчивая, Непромокаемая, Дышащая, Морозоустойчивая, Непромокаемая, Дышащая,',
    price: '7 712',
  },
  {
    image: hitsImages[imageSrcList[2]](),
    country: 'Финляндия',
    title: 'Костюм Горка Зима Финл. ПК #309',
    description: 'Морозоустойчивая, Непромокаемая, Дышащая, Морозоустойчивая, Непромокаемая, Дышащая,',
    price: '7 712',
  },
  {
    image: hitsImages[imageSrcList[3]](),
    country: 'Финляндия',
    title: 'Костюм Горка Зима Финл. ПК #309',
    description: 'Морозоустойчивая, Непромокаемая, Дышащая, Морозоустойчивая, Непромокаемая, Дышащая,',
    price: '7 712',
  },
  {
    image: hitsImages[imageSrcList[4]](),
    country: 'Финляндия',
    title: 'Костюм Горка Зима Финл. ПК #309',
    description: 'Морозоустойчивая, Непромокаемая, Дышащая, Морозоустойчивая, Непромокаемая, Дышащая,',
    price: '7 712',
  },
];

const previewProps: PreviewHitProps = {
  backgroundImage: previewHitsimages['/src/assets/img/home/preview-hits/background.png'](),
  description: 'Весной на рыбалке важно не промокнуть, не замёрзнуть и не вспотеть.',
};

const tags: string[] = [
  'одежда для охоты',
  'одежда для охоты',
  'одежда для охоты',
  'одежда для охоты',
  'одежда для охоты',
  'одежда для охоты',
];
---

<PreviewBlock class='preview-section' direction={direction}>
  <div slot='left' class='preview-section__left'>
    <PreviewHit {...previewProps}>
      <PreviewTags tags={tags} />
    </PreviewHit>
  </div>
  <div slot='right' class='preview-section__right right-preview-section'>
    <div class='right-preview-section__wrapper'>
      <div class='right-preview-section__top'>
        <h2 class='title-block'>Одежда Для Рыбалки</h2>
        <p class='subtitle-block'>Текст комментария от нейросети для расшифровки</p>
      </div>
      <PreviewTags aboveImage={false} class='preview-section__tags' tags={tags} />
      <Slider class='right-preview-section__slider' slides={slides} />
      <ShowMoreCatalog />
    </div>
  </div>
</PreviewBlock>

<style lang='scss'>
  .preview-section {
    margin-bottom: 40px;

    @include media('md') {
      margin-bottom: 36px;
    }

    @include media('lg') {
      margin-bottom: 8px;
    }

    &__left {
      @include media('md') {
        margin: 0 -8px;
      }

      @include media('lg') {
        margin: 0;
      }
    }

    &__right {
      @include media('lg') {
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    }

    &__tags {
      display: none;

      @include media('lg') {
        display: flex;
        margin-bottom: 24px;
      }
    }
  }
  .right-preview-section {
    @include media('lg') {
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    &__top {
      @include media('lg') {
        margin-bottom: 16px;
      }

      @include media('xl') {
        margin-bottom: 20px;
      }
    }

    &__slider {
      overflow: hidden;

      @include media('lg') {
        margin: 0 auto;
        @include adaptiveValue('width', calc(201 * 2), calc(187 * 2), $adaptive-sm, $adaptive-md);
      }

      @include media('xl') {
        @include adaptiveValue('width', calc(229 * 3), calc(201 * 3), $adaptive-xl, $adaptive-xxl);
      }
    }
  }
</style>
